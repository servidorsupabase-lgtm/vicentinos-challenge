<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Vicentinos Challenge 🏉🔥</title>
  <style>
    body {
      margin: 0;
      font-family: 'Arial Black', sans-serif;
      background: linear-gradient(to bottom, #001f3f, #003366);
      color: #fff;
      text-align: center;
    }
    header {
      background: url('https://i.imgur.com/dgS4PZL.jpg') no-repeat center/cover;
      padding: 40px;
      font-size: 2.5em;
      text-shadow: 2px 2px 10px #000;
      color: #00ff00;
    }
    .container {
      background: rgba(0, 0, 0, 0.8);
      border: 2px solid #00ff00;
      border-radius: 10px;
      margin: 30px auto;
      padding: 20px;
      width: 80%;
      max-width: 600px;
      box-shadow: 0px 0px 20px #00ff00;
    }
    input, button {
      padding: 10px;
      margin: 10px;
      border-radius: 5px;
      border: none;
    }
    input {
      width: 80%;
    }
    button {
      background: #00ff00;
      font-weight: bold;
      cursor: pointer;
      transition: 0.3s;
    }
    button:hover {
      background: #ff0000;
      color: #fff;
    }
    .question {
      font-size: 1.2em;
      margin: 20px 0;
    }
    .answers button {
      display: block;
      width: 100%;
      margin: 8px 0;
    }
    #confetti {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      pointer-events: none;
    }
    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <header>Vicentinos Challenge 🏉🔥</header>

  <div id="login" class="container">
    <h2>🎮 Tu nombre de guerra</h2>
    <input type="text" id="username" placeholder="Ingresá tu alias">
    <button onclick="startGame()">¡JUGAR AHORA!</button>
  </div>

  <div id="game" class="container hidden">
    <h2>Trivia de Rugby</h2>
    <p><b>Jugador:</b> <span id="playerName"></span></p>
    <p><b>Nivel:</b> <span id="level">1</span> / 15</p>
    <p><b>Monedas:</b> 💰 <span id="coins">1500</span></p>
    <label>Apuesta mínima 500:</label>
    <input type="number" id="bet" value="500" min="500">
    <button onclick="placeBet()">Apostar y jugar</button>

    <div id="questionBox" class="hidden">
      <p class="question" id="questionText"></p>
      <div class="answers" id="answers"></div>
    </div>
  </div>

  <canvas id="confetti"></canvas>

  <audio id="winSound" src="https://www.soundjay.com/human/applause-8.mp3"></audio>
  <audio id="rugido" src="https://www.soundjay.com/human/crowd-cheer-01.mp3"></audio>
  <audio id="failSound" src="https://www.soundjay.com/button/button-10.mp3"></audio>

  <script>
    // -------------------
    // Datos del juego
    // -------------------
    let coins = 1500;
    let level = 1;
    let bet = 0;
    let username = "";
    let askedQuestions = [];

    const allQuestions = [
      {q: "¿Cuántos jugadores tiene un equipo de rugby en cancha?", a:["15","11","13","7"], correct:0},
      {q: "¿Cuánto dura cada tiempo en un partido de rugby XV?", a:["40 minutos","30 minutos","35 minutos","45 minutos"], correct:0},
      {q: "¿Cómo se llama la formación donde los forwards se empujan tras una infracción menor?", a:["Scrum","Ruck","Maul","Lineout"], correct:0},
      {q: "¿Qué país ganó la primera Copa del Mundo de Rugby en 1987?", a:["Nueva Zelanda","Sudáfrica","Inglaterra","Australia"], correct:0},
      {q: "¿Qué es un 'try'?", a:["Apoyar la pelota en el in-goal rival","Patear a los palos","Derribar al rival","Una infracción"], correct:0},
      {q: "¿Cuántos puntos vale un try?", a:["5","3","7","4"], correct:0},
      {q: "¿Qué posición usa la camiseta número 10?", a:["Apertura","Medio scrum","Fullback","Wing"], correct:0},
      {q: "¿Cómo se llama el saque lateral?", a:["Lineout","Scrum","Kickoff","Drop"], correct:0},
      {q: "¿Cuál es el apodo del seleccionado de Nueva Zelanda?", a:["All Blacks","Wallabies","Springboks","Pumas"], correct:0},
      {q: "¿Qué jugador argentino es considerado leyenda del rugby y fue capitán de Los Pumas en 2007?", a:["Agustín Pichot","Juan Martín Hernández","Felipe Contepomi","Mario Ledesma"], correct:0},
      // --- Agregamos hasta 100 preguntas variadas (historia, jugadas, reglamento, jugadores)
    ];

    // Rellenar hasta 100 preguntas (simples para demo)
    while(allQuestions.length < 100){
      allQuestions.push({
        q: "Pregunta extra " + allQuestions.length + " sobre rugby?",
        a:["Opción A","Opción B","Opción C","Opción D"],
        correct: Math.floor(Math.random()*4)
      });
    }

    function startGame(){
      username = document.getElementById("username").value;
      if(!username){ alert("Ingresá un nombre para jugar"); return; }
      document.getElementById("playerName").innerText = username;
      document.getElementById("login").classList.add("hidden");
      document.getElementById("game").classList.remove("hidden");
    }

    function placeBet(){
      bet = parseInt(document.getElementById("bet").value);
      if(bet < 500){ alert("La apuesta mínima es 500!"); return; }
      if(bet > coins){ alert("No tenés suficientes monedas!"); return; }
      loadQuestion();
    }

    function loadQuestion(){
      let qIndex;
      do {
        qIndex = Math.floor(Math.random()*allQuestions.length);
      } while(askedQuestions.includes(qIndex));
      askedQuestions.push(qIndex);

      const q = allQuestions[qIndex];
      document.getElementById("questionBox").classList.remove("hidden");
      document.getElementById("questionText").innerText = q.q;
      const answersDiv = document.getElementById("answers");
      answersDiv.innerHTML = "";
      q.a.forEach((ans,i)=>{
        const btn = document.createElement("button");
        btn.innerText = ans;
        btn.onclick = ()=>checkAnswer(i,q.correct);
        answersDiv.appendChild(btn);
      });
    }

    function checkAnswer(choice, correct){
      if(choice === correct){
        coins += bet;
        level++;
        document.getElementById("coins").innerText = coins;
        document.getElementById("level").innerText = level;
        document.getElementById("winSound").play();
        document.getElementById("rugido").play();
        launchConfetti();
        if(level>15){ alert("¡Felicitaciones campeón! Terminaste el Challenge 🎉"); }
      } else {
        coins -= bet;
        document.getElementById("coins").innerText = coins;
        document.getElementById("failSound").play();
        alert("❌ Respuesta incorrecta, perdiste la apuesta");
        if(coins < 500){ alert("Te quedaste sin monedas. ¡Comprá más para seguir jugando!"); }
      }
    }

    // -------------------
    // Animación confetti
    // -------------------
    function launchConfetti(){
      const duration = 2 * 1000;
      const end = Date.now() + duration;
      (function frame() {
        const colors = ['#bb0000', '#ffffff', '#00ff00'];
        const confetti = document.getElementById('confetti').getContext('2d');
        confetti.clearRect(0, 0, window.innerWidth, window.innerHeight);
        for(let i=0;i<200;i++){
          confetti.fillStyle = colors[Math.floor(Math.random()*colors.length)];
          confetti.fillRect(Math.random()*window.innerWidth, Math.random()*window.innerHeight, 5,5);
        }
        if(Date.now() < end){ requestAnimationFrame(frame); }
      }());
    }
  </script>
</body>
</html>
